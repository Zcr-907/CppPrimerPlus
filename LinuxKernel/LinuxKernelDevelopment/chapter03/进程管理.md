### 进程管理

* 线程: 是内核调度的基本单位
* 进程: 是系统资源分配的基本单位
  * 程序本身并不是进程,进程是处于执行期的程序以及相关资源的总称
  * fork(): 一次调用,两次返回,返回时父进程恢复执行,子进程开始执行

#### 写时拷贝

* 调用fork()时,首先为子进程开辟虚拟内存空间
* 将父进程的数据拷贝至子进程的虚拟内存空间(DRAM物理内存空间并不会立即开辟空间)
* 子进程的页表条目(PTE)中的每个条目标记为只读,并且对应的区域结构设置为私有的写时复制
* 读取: 根据PTE读取相应的物理内存数据
* 写入: 触发只读保护屏障,在物理内存中创建该页面的副本,更新子进程的页表条目指向这个新创建的页,然后恢复这个页面的可写权限,CPU最后重新执行这条写指令